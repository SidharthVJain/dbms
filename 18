DELIMITER $$

CREATE TABLE accounts (
    acc_id INT PRIMARY KEY,
    balance DECIMAL(10,2)
)$$

CREATE TABLE transactions (
    txn_id INT PRIMARY KEY,
    acc_id INT,
    amount DECIMAL(10,2),
    txn_type VARCHAR(20),
    FOREIGN KEY (acc_id) REFERENCES accounts(acc_id)
)$$

CREATE TRIGGER update_acc_balance
AFTER INSERT ON transactions
FOR EACH ROW
BEGIN
    IF NEW.txn_type = 'DEPOSIT' THEN
        UPDATE accounts
        SET balance = balance + NEW.amount
        WHERE acc_id = NEW.acc_id;
    ELSEIF NEW.txn_type = 'WITHDRAWAL' THEN
        UPDATE accounts
        SET balance = balance - NEW.amount
        WHERE acc_id = NEW.acc_id;
    END IF;
END$$

INSERT INTO accounts VALUES (2, 3400)$$

INSERT INTO transactions VALUES (1, 2, 150, 'DEPOSIT')$$
INSERT INTO transactions VALUES (2, 2, 300, 'WITHDRAWAL')$$

DELIMITER ;

SELECT * FROM accounts;
