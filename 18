CREATE TABLE Account (
    AccNo INT PRIMARY KEY,
    AccName VARCHAR(50),
    Balance DECIMAL(10,2)
);

CREATE TABLE TransactionDetails (
    TxnId INT PRIMARY KEY,
    AccNo INT,
    TxnType VARCHAR(20),
    Amount DECIMAL(10,2),
    TxnDate DATE,
    FOREIGN KEY (AccNo) REFERENCES Account(AccNo)
);

DELIMITER //

CREATE TRIGGER update_account_balance
AFTER INSERT ON TransactionDetails
FOR EACH ROW
BEGIN
    IF NEW.TxnType = 'Deposit' THEN
        UPDATE Account
        SET Balance = Balance + NEW.Amount
        WHERE AccNo = NEW.AccNo;

    ELSEIF NEW.TxnType = 'Withdrawal' THEN
        UPDATE Account
        SET Balance = Balance - NEW.Amount
        WHERE AccNo = NEW.AccNo;
    END IF;
END;
//

DELIMITER ;

INSERT INTO TransactionDetails VALUES (1, 101, 'Deposit', 2000, '2026-01-20');

SELECT * FROM Account;
